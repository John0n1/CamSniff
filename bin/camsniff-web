#!/usr/bin/env bash
# Wrapper to launch only the CamSniff Web UI without full scanning.
# Tries packaged layout first, then source tree.

PKG_ROOT="/usr/lib/camsniff"
if [[ -f "$PKG_ROOT/src/scripts/webui.sh" ]]; then
  exec bash "$PKG_ROOT/src/scripts/webui.sh" "$@"
elif [[ -f "$PKG_ROOT/scripts/webui.sh" ]]; then
  exec bash "$PKG_ROOT/scripts/webui.sh" "$@"
fi

# Fallback to repository clone layout
SOURCE_FILE="${BASH_SOURCE[0]}"
while [ -L "$SOURCE_FILE" ]; do
  DIR="$(cd -P "$(dirname "$SOURCE_FILE")" && pwd)"
  SOURCE_FILE="$(readlink "$SOURCE_FILE")"
  [[ $SOURCE_FILE != /* ]] && SOURCE_FILE="$DIR/$SOURCE_FILE"
done
WRAPPER_DIR="$(cd -P "$(dirname "$SOURCE_FILE")" && pwd)"
REPO_ROOT="$(cd "$WRAPPER_DIR/.." && pwd)"

if [[ -f "$REPO_ROOT/src/scripts/webui.sh" ]]; then
  exec bash "$REPO_ROOT/src/scripts/webui.sh" "$@"
fi

echo "[ERROR] Unable to locate webui.sh in packaged or source locations." >&2
exit 1
