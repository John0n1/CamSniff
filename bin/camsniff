#!/usr/bin/env bash
#
# CamSniff- Automated IP camera reconnaissance toolkit
# By John Hauger Mitander <john@on1.no>
# Copyright 2025 John Hauger Mitander
#
# SPDX-License-Identifier: MIT
# Dispatch wrapper ensuring `camsniff` resolves to the packaged scripts path.

set -euo pipefail

SCRIPT_PATH="$(readlink -f "$0")"
SCRIPT_DIR="$(dirname "$SCRIPT_PATH")"

# When running from a source tree, prefer local scripts. Fallback to system install.
if [[ -f "$SCRIPT_DIR/../scripts/camsniff.sh" ]]; then
	ROOT_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"
else
	ROOT_DIR="/usr/lib/camsniff"
fi

exec "$ROOT_DIR/scripts/camsniff.sh" "$@"
